(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(t,e,a){t.exports={block:"TableHeader_block__2yTHY",header:"TableHeader_header__4oESd"}},28:function(t,e,a){t.exports={block:"App_block__3-beE"}},29:function(t,e,a){t.exports=a(62)},5:function(t,e,a){t.exports={block:"TableRow_block__2L2P8",cell:"TableRow_cell__1WtNu",cellContact:"TableRow_cellContact__3OvX_",cellDeals:"TableRow_cellDeals__2dzTV",cellTags:"TableRow_cellTags__CJsp_"}},61:function(t,e,a){},62:function(t,e,a){"use strict";a.r(e);var n=a(0),c=a.n(n),o=a(10),r=a.n(o),s=a(11),i=a(12),l=a(15),u=a(13),d=a(16),f=a(14),h=a(2),p=a.n(h),b=a(7),m=a(24),T=a.n(m),_=function(t){return/^[a-z ]+$/i.test(t)},g=function(t){return t.reduce(function(t,e){return t+Number(e.value)},0)},O=a(8),C={1:"contact",2:"totalValue",3:"location",4:"deals",5:"tags"},N={Alabama:"AL",Alaska:"AK","American Samoa":"AS",Arizona:"AZ",Arkansas:"AR",California:"CA",Colorado:"CO",Connecticut:"CT",Delaware:"DE","District Of Columbia":"DC","Federated States Of Micronesia":"FM",Florida:"FL",Georgia:"GA",Guam:"GU",Hawaii:"HI",Idaho:"ID",Illinois:"IL",Indiana:"IN",Iowa:"IA",Kansas:"KS",Kentucky:"KY",Louisiana:"LA",Maine:"ME","Marshall Islands":"MH",Maryland:"MD",Massachusetts:"MA",Michigan:"MI",Minnesota:"MN",Mississippi:"MS",Missouri:"MO",Montana:"MT",Nebraska:"NE",Nevada:"NV","New Hampshire":"NH","New Jersey":"NJ","New Mexico":"NM","New York":"NY","North Carolina":"NC","North Dakota":"ND","Northern Mariana Islands":"MP",Ohio:"OH",Oklahoma:"OK",Oregon:"OR",Palau:"PW",Pennsylvania:"PA","Puerto Rico":"PR","Rhode Island":"RI","South Carolina":"SC","South Dakota":"SD",Tennessee:"TN",Texas:"TX",Utah:"UT",Vermont:"VT","Virgin Islands":"VI",Virginia:"VA",Washington:"WA","West Virginia":"WV",Wisconsin:"WI",Wyoming:"WY"},k=function(t){return t.replace(/([A-Z])/g," $1").trim().charAt(0).toUpperCase()+t.slice(1)},y=function(t){var e=t.toLocaleString();return"$".concat(e)},A=function(t){return null===t||""===t.city?"":"".concat(t.city,", ").concat(N[t.state],", ").concat("US"===t.country?"USA":t.country)},E=function(t){return t.join(", ")},w=a(21),j=function(t){var e=t.value;return c.a.createElement("th",{className:w.block},c.a.createElement("h1",{className:w.header},function(t){return(t.charAt(0).toUpperCase()+t.slice(1)).replace(/([A-Z])/g," $1").trim()}(e)))},v=a(4),S=a(25),M=a.n(S),L=a(5),I=function(t){var e=t.contact,a=t.columns,n=function(t){return Object(O.a)({},t,{contact:k(t.contact),location:A(t.location),tags:E(t.tags),totalValue:y(t.totalValue)})}(e);return c.a.createElement("tr",{className:L.block},a.map(function(t,e){return c.a.createElement("td",{key:e,className:M()(L.cell,Object(v.a)({},"".concat(L.cellContact),"contact"===t),Object(v.a)({},"".concat(L.cellTotalValue),"totalValue"===t),Object(v.a)({},"".concat(L.cellLocation),"location"===t),Object(v.a)({},"".concat(L.cellDeals),"deals"===t),Object(v.a)({},"".concat(L.cellTags),"tags"===t))},"contact"===t&&c.a.createElement("img",{src:"https://ui-avatars.com/api/?background=eae0fe&color=202129&name=".concat(n.contact),alt:n.contact}),c.a.createElement("h2",null,n[t]))}))},D=a(6),R=a(26),V=a.n(R),x=a(27),H="https://lamppoststudios.api-us1.com/api/3",P="0f7e5c9167768f6bb0a6e09e335ce464da7cb5e7008b989f0057266c26342424a4d8d3e5",U="https://cors-anywhere.herokuapp.com",W=function(t){return new Promise(function(e){fetch("".concat(U,"/").concat(H,"/contacts/").concat(t,"/contactTags"),{headers:{"Api-Token":P}}).then(function(t){return t.json()}).then(function(t){Promise.all(t.contactTags.map(function(){var t=Object(b.a)(p.a.mark(function t(e){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(U,"/").concat(H,"/tags/").concat(e.id),{headers:{"Api-Token":P}}).then(function(t){return t.json()}).then(function(t){return void 0!==t.tag?t.tag.tag:null});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())).then(function(t){e(function(t){return t.filter(function(t){return t&&t.length<12})}(t))})}).catch(function(t){console.error(t)})})},G={contactsList:[],error:null,isLoading:!1},F=Object(D.c)({contacts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"GET_CONTACTS_FETCH":return Object(O.a)({},t,{isLoading:!0,error:null});case"GET_CONTACTS_SUCCESS":return Object(O.a)({},t,{contactsList:e.contactsList,isLoading:!1,error:null});case"GET_CONTACTS_FAILURE":return Object(O.a)({},t,{isLoading:!1,error:e.error});default:return t}}}),J=Object(D.a)(x.a,V.a),K=Object(D.d)(F,J),Y=a(9),B=function(t){function e(){var t,a;Object(s.a)(this,e);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=Object(l.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(c)))).componentDidMount=Object(b.a)(p.a.mark(function t(){var e;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=a.props.loadContacts,t.next=3,e();case 3:case"end":return t.stop()}},t)})),a}return Object(d.a)(e,t),Object(i.a)(e,[{key:"render",value:function(){var t=this.props,e=t.contacts,a=t.isLoading,n=Object.values(C);return!a&&e.length>0?c.a.createElement("table",{className:Y.block},c.a.createElement("thead",{className:Y.head},c.a.createElement("tr",{className:Y.headRow},this.tableHeaders)),c.a.createElement("tbody",{className:Y.bodyBlock},e.map(function(t){return c.a.createElement(I,{key:t.id,contact:t,columns:n})}))):c.a.createElement("div",{className:Y.loader},c.a.createElement(T.a,{type:"TailSpin",color:"#3c53d8",height:60,width:60}))}},{key:"tableHeaders",get:function(){return Object.values(C).map(function(t,e){return c.a.createElement(j,{key:e,value:t})})}}]),e}(c.a.Component),$=Object(f.b)(function(t){return{contacts:t.contacts.contactsList,isLoading:t.contacts.isLoading}},function(t){return{loadContacts:function(){t(function(t){t({type:"GET_CONTACTS_FETCH"}),fetch("".concat(U,"/").concat(H,"/contacts?include=contactData,contactTags.tag,contactDeals.deal&status=1&limit=100"),{headers:{"Api-Token":P}}).then(function(t){return t.json()}).then(function(t){return t.contacts.filter(function(t){return _(t.firstName)&&_(t.lastName)})}).then(function(e){Promise.all(e.map(function(){var t=Object(b.a)(p.a.mark(function t(e){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(U,"/").concat(H,"/contacts/").concat(e.id),{headers:{"Api-Token":P}}).then(function(t){return t.json()}).then(function(){var t=Object(b.a)(p.a.mark(function t(e){var a,n,c,o,r;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.contact,n=e.contactData,c=e.deals,t.next=3,W(a.id);case 3:return o=t.sent,r=n?{city:n[0].geoCity,state:n[0].geoState,country:n[0].geoCountry2}:null,t.abrupt("return",{contact:"".concat(a.firstName," ").concat(a.lastName),deals:c.length,id:a.id,location:r,tags:o,totalValue:g(c)});case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())).then(function(e){t({type:"GET_CONTACTS_SUCCESS",contactsList:e})})}).catch(function(e){t({type:"GET_CONTACTS_FAILURE",error:e})})})}}})(B),z=a(28),Z=function(t){function e(){return Object(s.a)(this,e),Object(l.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(i.a)(e,[{key:"render",value:function(){return c.a.createElement(f.a,{store:K},c.a.createElement("main",{className:z.block},c.a.createElement($,null)))}}]),e}(c.a.Component),X=(a(61),document.getElementById("ac-contacts"));r.a.render(c.a.createElement(Z,null),X)},9:function(t,e,a){t.exports={block:"Table_block__3t-Ce",head:"Table_head__MdU8J",headRow:"Table_headRow__3PW03",bodyBlock:"Table_bodyBlock__2DlFp",loader:"Table_loader__w1mDQ"}}},[[29,1,2]]]);
//# sourceMappingURL=main.ec5a0149.chunk.js.map